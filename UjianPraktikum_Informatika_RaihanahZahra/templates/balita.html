{% extends 'base.html' %}
{% block content %}

<div class="card shadow-sm">
    <div class="card-body">

        <h5 class="mb-3">
            <i class="bi bi-emoji-smile text-warning me-2"></i>
            Data Balita
        </h5>

        {% if session.role == 'petugas' %}
        <div class="card border-warning mb-4">
            <div class="card-body">

                <h6 class="text-warning mb-3">
                    <i class="bi bi-plus-circle"></i>
                    Tambah Data Balita
                </h6>

                <form method="POST">
                    <div class="row g-2">

                        <div class="col-md-3">
                            <input class="form-control" name="nama"
                                   placeholder="Nama Balita" required>
                        </div>

                        <div class="col-md-2">
                            <input type="date" class="form-control" name="tgl" required>
                        </div>

                        <div class="col-md-2">
                            <select name="jk" class="form-select" required>
                                <option value="">Jenis Kelamin</option>
                                <option value="L">Laki-laki</option>
                                <option value="P">Perempuan</option>
                            </select>
                        </div>

                        <div class="col-md-3">
                            <select name="ibu" class="form-select" required>
                                <option value="">Pilih Ibu</option>
                                {% for i in ibu %}
                                <option value="{{ i.id_ibu }}">{{ i.nama_ibu }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="col-md-2 d-grid">
                            <button class="btn btn-warning">
                                <i class="bi bi-save"></i>
                            </button>
                        </div>

                    </div>
                </form>

            </div>
        </div>
        {% endif %}

        <div class="table-responsive">
            <table class="table table-bordered table-hover align-middle">
                <thead class="table-warning text-center">
                    <tr>
                        <th>No</th>
                        <th>Nama</th>
                        <th>Tgl Lahir</th>
                        <th>JK</th>
                        <th>Nama Ibu</th>
                        {% if session.role == 'petugas' %}
                        <th>Aksi</th>
                        {% endif %}
                    </tr>
                </thead>
                <tbody>
                    {% for b in balita %}
                    <tr>
                        <td class="text-center">{{ loop.index }}</td>
                        <td>{{ b.nama_balita }}</td>
                        <td>{{ b.tanggal_lahir }}</td>
                        <td>{{ b.jenis_kelamin }}</td>
                        <td>{{ b.nama_ibu }}</td>

                        {% if session.role == 'petugas' %}
                        <td class="text-center">
                            <a href="/balita/edit/{{ b.id_balita }}" class="btn btn-warning btn-sm">
                                <i class="bi bi-pencil"></i>
                            </a>
                            <a href="/balita/delete/{{ b.id_balita }}"
                               class="btn btn-danger btn-sm"
                               onclick="return confirm('Hapus data?')">
                                <i class="bi bi-trash"></i>
                            </a>
                        </td>
                        {% endif %}
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="6" class="text-center text-muted">
                            Belum ada data balita
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

    </div>
</div>

{% endblock %}
